{% extends "base.html" %}

{% block title %}Products{% endblock %}

{% block content %}
<div class="container mx-auto p-4 flex gap-6">

  <!-- Sidebar -->
  <aside class="w-1/4 p-4 bg-white rounded shadow">
    <h2 class="font-bold mb-4">Categories</h2>
    <ul class="space-y-2">
      {% for category in categories %}
        <li>
          <a
            href="{% url 'products:category_filter' category.slug %}"
            class="text-blue-600 hover:underline"
          >
            {{ category.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
  </aside>

  <!-- Products -->
  <main class="w-3/4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {% for product in products %}
        <div class="bg-white p-4 rounded shadow">

          {% with product.images.first as image %}
            {% if image %}
              <img
                src="{{ image.image.url }}"
                alt="{{ product.name }}"
                
                class="w-full h-48 object-cover mb-3 rounded"
              >
            {% endif %}
          {% endwith %}

          <h3 class="font-bold">{{ product.name }}</h3>
        </div>
      {% empty %}
        <p>No products found.</p>
      {% endfor %}
    </div>
  </main>

</div>
{% endblock %}
